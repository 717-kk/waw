<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- ÂêØÁî® iOS ÂÖ®Â±èÊ®°Âºè -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- ËÆæÁΩÆÁä∂ÊÄÅÊ†èÊ†∑Âºè -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Á¶ÅÊ≠¢Ëá™Âä®ËØÜÂà´ÁîµËØùÂè∑Á†Å -->
    <meta name="format-detection" content="telephone=no">
    <title>waw</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <div id="content">
            <!-- Êé®ËçêÈ°µÈù¢ -->
            <div id="recommend" class="page">
                <div class="recommend-header">
                    <div class="search-bar">
                        <input type="text" placeholder="ÊêúÁ¥¢..." class="search-input">
                        <div class="search-actions">
                            <button class="icon-btn-small" title="ÊêúÁ¥¢">
                                <i class="fas fa-search"></i>
                            </button>
                            <button class="icon-btn-small" title="Âà∑Êñ∞">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="tags-bar" id="tags-bar">
                        <div class="tag-item active" data-tag="recommend">Êé®Ëçê</div>
                        <div class="tag-item add-tag-btn" id="add-tag-btn">
                            + Ê∑ªÂä†
                        </div>
                    </div>
                </div>
                
                <div class="recommend-content">
                    <div class="character-grid">
                        <!-- 4‰∏™ËßíËâ≤Âç° -->
                        <div class="character-card">
                            <div class="card-image"></div>
                            <div class="card-info">
                                <div class="card-name">ËßíËâ≤ÂêçÁß∞ 1</div>
                            </div>
                        </div>
                        <div class="character-card">
                            <div class="card-image"></div>
                            <div class="card-info">
                                <div class="card-name">ËßíËâ≤ÂêçÁß∞ 2</div>
                            </div>
                        </div>
                        <div class="character-card">
                            <div class="card-image"></div>
                            <div class="card-info">
                                <div class="card-name">ËßíËâ≤ÂêçÁß∞ 3</div>
                            </div>
                        </div>
                        <div class="character-card">
                            <div class="card-image"></div>
                            <div class="card-info">
                                <div class="card-name">ËßíËâ≤ÂêçÁß∞ 4</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Âä®ÊÄÅÈ°µÈù¢ -->
            <div id="moments" class="page">
                <div class="placeholder-content">Âä®ÊÄÅÈ°µÈù¢ÂÜÖÂÆπ</div>
            </div>

            <!-- Ê∂àÊÅØÈ°µÈù¢ -->
            <div id="messages" class="page">
                <div class="placeholder-content">Ê∂àÊÅØÈ°µÈù¢ÂÜÖÂÆπ</div>
            </div>

            <!-- ÊàëÁöÑÈ°µÈù¢ -->
            <div id="profile" class="page active">
                <button id="theme-toggle" class="theme-toggle" aria-label="ÂàáÊç¢‰∏ªÈ¢ò">
                    <span class="icon">üåô</span>
                </button>
                <div class="profile-header">
                    <div class="avatar" id="avatar-container">
                        <img id="avatar-img" src="" style="display:none; width:100%; height:100%; object-fit:cover;">
                        <!-- ‰ΩøÁî®‰∏Ä‰∏™Âç†‰ΩçÁ¨¶ÂõæÁâáÊàñÁ∫ØËâ≤Âùó -->
                        <div class="avatar-placeholder" id="avatar-placeholder">Â§¥</div>
                        <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                    </div>
                    <div class="user-info">
                        <div class="nickname" id="nickname">ÊòµÁß∞</div>
                        <div class="user-id">ID: <span id="user-id-val">123456</span></div>
                    </div>
                </div>
                
                <div class="divider"></div>

                <div class="menu-list">
                    <div class="menu-item" id="menu-api-settings">API ËÆæÁΩÆ</div>
                    <div class="menu-item" id="menu-worldbook">ËßÑÂàôÂè•</div>
                    <div class="menu-item">CSS</div>
                    <div class="menu-item">Êï∞ÊçÆ</div>
                </div>
            </div>

            <!-- ËßÑÂàôÂè•È°µÈù¢ -->
            <div id="worldbook" class="page">
                <div class="page-header">
                    <button class="header-btn" id="back-to-profile-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>ËßÑÂàôÂè•</h2>
                    <div class="header-actions">
                        <button class="header-btn" id="add-folder-btn" title="Êñ∞Âª∫Êñá‰ª∂Â§π">
                            <i class="fas fa-folder-plus"></i>
                        </button>
                        <button class="header-btn" id="add-worldbook-btn" title="Êñ∞Â¢û‰∏ñÁïå‰π¶">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="page-content">
                    <div class="empty-state" id="worldbook-empty-state">
                        <i class="fas fa-book"></i>
                        <p>ËøôÈáåÂ∞ÜËÆ∞ÂΩï‰Ω†ÁöÑËßÑÂàôÂè•...</p>
                    </div>
                    <div class="folder-list" id="folder-list">
                        <!-- Êñá‰ª∂Â§πÂàóË°®Â∞ÜÈÄöËøá JS Âä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Â∫ïÈÉ®ÂØºËà™Ê†è -->
        <nav id="bottom-nav">
            <div class="nav-item" data-target="recommend">
                <span class="nav-text">Êé®Ëçê</span>
            </div>
            <div class="nav-item" data-target="moments">
                <span class="nav-text">Âä®ÊÄÅ</span>
            </div>
            <div class="nav-item" data-target="messages">
                <span class="nav-text">Ê∂àÊÅØ</span>
            </div>
            <div class="nav-item active" data-target="profile">
                <span class="nav-text">ÊàëÁöÑ</span>
            </div>
        </nav>
    </div>

    <!-- Êñ∞Â¢û/ÁºñËæëËßÑÂàôÂè•È°µÈù¢ -->
    <div class="sub-page" id="add-worldbook-page">
        <div class="page-header">
            <button class="header-btn" id="close-add-worldbook-btn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <h2 id="add-page-title">Êñ∞Â¢ûËßÑÂàôÂè•</h2>
            <div style="width: 32px;"></div>
        </div>
        <div class="page-content">
            <div class="form-group">
                <label>ÂêçÁß∞</label>
                <input type="text" id="worldbook-title-input" placeholder="ËæìÂÖ•ÂêçÁß∞...">
            </div>
            <div class="form-group">
                <label>ÈÄâÊã©Êñá‰ª∂Â§π</label>
                <div class="custom-select-wrapper">
                    <div class="custom-select" id="folder-select">
                        <div class="custom-select-trigger">
                            <span id="selected-folder-text">Êó†</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </div>
                        <div class="custom-options" id="folder-options">
                            <div class="custom-option selected" data-value="">Êó†</div>
                            <!-- ÈÄâÈ°πÂä®ÊÄÅÁîüÊàê -->
                        </div>
                    </div>
                    <input type="hidden" id="selected-folder-value" value="">
                </div>
            </div>
            <div class="form-group">
                <label>ÂÜÖÂÆπ</label>
                <textarea id="worldbook-content-input" placeholder="ËæìÂÖ•ÂÜÖÂÆπ..." style="height: 300px;"></textarea>
            </div>
            <button id="save-worldbook-item-btn" class="save-btn">‰øùÂ≠ò</button>
        </div>
    </div>

    <!-- API ËÆæÁΩÆÈ°µÈù¢ -->
    <div class="sub-page" id="api-settings-page">
        <div class="page-header">
            <button class="header-btn" id="close-api-settings-btn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <h2>API ËÆæÁΩÆ</h2>
            <div style="width: 32px;"></div>
        </div>
        <div class="page-content">
            <div class="form-group">
                <label for="api-url">API URL</label>
                <input type="text" id="api-url" placeholder="‰æãÂ¶Ç: https://api.openai.com/v1">
            </div>
            <div class="form-group">
                <label for="api-key">API Key</label>
                <input type="password" id="api-key" placeholder="sk-...">
            </div>
            <div class="form-group">
                <label>Ê®°Âûã</label>
                <div class="model-input-group">
                    <div class="custom-select-wrapper">
                        <div class="custom-select" id="model-select-custom">
                            <div class="custom-select-trigger">
                                <span id="selected-model-text">ËØ∑ÈÄâÊã©ÊàñÊãâÂèñÊ®°Âûã</span>
                                <i class="fas fa-chevron-down arrow"></i>
                            </div>
                            <div class="custom-options" id="model-options">
                                <!-- ÈÄâÈ°πÂ∞ÜÈÄöËøá JS Âä®ÊÄÅÁîüÊàê -->
                                <div class="custom-option selected" data-value="">ËØ∑ÈÄâÊã©ÊàñÊãâÂèñÊ®°Âûã</div>
                            </div>
                        </div>
                        <input type="hidden" id="model-select-value" value="">
                    </div>
                    <button id="fetch-models-btn" class="icon-btn" title="ÊãâÂèñÊ®°ÂûãÂàóË°®">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <div class="range-header">
                    <label for="temperature">Ê∏©Â∫¶</label>
                    <span id="temp-value">0.7</span>
                </div>
                <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
                <div class="range-labels">
                    <span>0 (Á®≥ÂÆö)</span>
                    <span>2 (ÂàõÈÄ†ÊÄß)</span>
                </div>
            </div>
            <button id="save-settings-btn" class="save-btn">‰øùÂ≠òÈÖçÁΩÆ</button>
        </div>
    </div>

    <!-- ËßíËâ≤ËØ¶ÊÉÖÈ°µÈù¢ -->
    <div class="sub-page" id="character-detail-page">
        <div class="page-header">
            <button class="header-btn" id="close-detail-btn">
                <i class="fas fa-chevron-left"></i>
            </button>
            <h2 id="detail-title">ËßíËâ≤ËØ¶ÊÉÖ</h2>
            <div style="width: 32px;"></div>
        </div>
        <div class="page-content">
            <div class="detail-header-card">
                <div class="detail-avatar" id="detail-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="detail-basic-info">
                    <h1 id="detail-name">ËßíËâ≤ÂêçÁß∞</h1>
                    <div class="detail-tags">
                        <span class="detail-tag" id="detail-age">20Â≤Å</span>
                        <span class="detail-tag" id="detail-identity">Â≠¶Áîü</span>
                    </div>
                </div>
            </div>
            
            <div class="detail-section">
                <h3>ËÉåÊôØÊïÖ‰∫ã</h3>
                <p id="detail-background">ËøôÈáåÊòØËßíËâ≤ÁöÑËÉåÊôØÊïÖ‰∫ã...</p>
            </div>

            <button class="save-btn" id="start-chat-btn">ÂºÄÂßãÂØπËØù</button>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°ÜÁªÑ‰ª∂ -->
    
    <!-- Êñ∞Âª∫Êñá‰ª∂Â§πÊ®°ÊÄÅÊ°Ü -->
    <div class="modal-overlay" id="new-folder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Êñ∞Âª∫Êñá‰ª∂Â§π</h3>
                <button class="header-btn" onclick="closeModal('new-folder-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <input type="text" id="folder-name-input" placeholder="ËæìÂÖ•Êñá‰ª∂Â§πÂêçÁß∞...">
                <div class="modal-btn-group">
                    <button class="modal-btn btn-cancel" onclick="closeModal('new-folder-modal')">ÂèñÊ∂à</button>
                    <button class="modal-btn btn-confirm" id="confirm-folder-btn">ÂàõÂª∫</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁî®Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div class="modal-overlay" id="universal-confirm-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirm-modal-title">Á°ÆËÆ§</h3>
                <button class="header-btn" onclick="closeModal('universal-confirm-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p id="confirm-modal-message" style="text-align: center; margin-bottom: 15px; color: rgba(255,255,255,0.8);"></p>
                <div class="modal-btn-group">
                    <button class="modal-btn btn-cancel" onclick="closeModal('universal-confirm-modal')">ÂèñÊ∂à</button>
                    <button class="modal-btn btn-danger" id="confirm-modal-ok-btn">Âà†Èô§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁî®ËæìÂÖ•Ê®°ÊÄÅÊ°Ü (Áî®‰∫éÈáçÂëΩÂêç) -->
    <div class="modal-overlay" id="universal-prompt-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="prompt-modal-title">ËæìÂÖ•</h3>
                <button class="header-btn" onclick="closeModal('universal-prompt-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <input type="text" id="prompt-modal-input" placeholder="ËØ∑ËæìÂÖ•...">
                <div class="modal-btn-group">
                    <button class="modal-btn btn-cancel" onclick="closeModal('universal-prompt-modal')">ÂèñÊ∂à</button>
                    <button class="modal-btn btn-confirm" id="prompt-modal-ok-btn">Á°ÆËÆ§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†Ê†áÁ≠æÊ®°ÊÄÅÊ°Ü -->
    <div class="modal-overlay" id="add-tag-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="add-tag-modal-title">Ê∑ªÂä†Êñ∞Ê†áÁ≠æ</h3>
                <button class="header-btn" onclick="closeModal('add-tag-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Ê†áÁ≠æÂêçÁß∞</label>
                    <input type="text" id="new-tag-name" placeholder="ËæìÂÖ•ÂêçÁß∞...">
                </div>
                <div class="form-group">
                    <label>Ê†áÁ≠æÂÜÖÂÆπ</label>
                    <textarea id="new-tag-content" placeholder="ËæìÂÖ•ËØ•Ê†áÁ≠æ‰∏ãÁöÑÂÜÖÂÆπ..." style="height: 100px;"></textarea>
                </div>
                <div class="modal-btn-group">
                    <button class="modal-btn btn-cancel" onclick="closeModal('add-tag-modal')">ÂèñÊ∂à</button>
                    <button class="modal-btn btn-confirm" id="confirm-add-tag-btn">‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ê†áÁ≠æÊìç‰ΩúÊ®°ÊÄÅÊ°Ü -->
    <div class="modal-overlay" id="tag-actions-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ê†áÁ≠æÊìç‰Ωú</h3>
                <button class="header-btn" onclick="closeModal('tag-actions-modal')"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="modal-btn-group" style="flex-direction: column;">
                    <button class="modal-btn" id="edit-tag-action-btn" style="background: var(--item-bg); border: 1px solid var(--border-color); margin-bottom: 10px; color: var(--text-color);">ÁºñËæëÊ†áÁ≠æ</button>
                    <button class="modal-btn btn-danger" id="delete-tag-action-btn">Âà†Èô§Ê†áÁ≠æ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast ÂÆπÂô® -->
    <div id="toast-container" class="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>
